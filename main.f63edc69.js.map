{"version":3,"sources":["main.js"],"names":["nandibus","document","querySelector","keys","Array","from","querySelectorAll","turnon","nandibusWitdh","clientWidth","resizeNandibus","basesize","scale","visualViewport","width","style","transform","window","addEventListener","rand","min","max","Math","floor","random","keyPressSounds","getElementById","forEach","sound","volume","playSound","n","play","soundOrder","manageKeyPressEvent","lightsAnimation","keyPressedAnimation","key","e","filter","dataset","keycode","code","classList","add","click","setTimeout","remove","sleep","ms","Promise","resolve","lights","blue","red","yellow","turnOffLights","states","defaultDuration","executeStep","pos","state","action","delay","then","map","active","el","duration","turnOnAnimation","helloNandibusSound","powerButton","helloMessage"],"mappings":"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","file":"main.f63edc69.js","sourceRoot":"..","sourcesContent":["\n/* INIT */\n\nconst nandibus = document.querySelector('.nandibus');\nconst keys = Array.from(document.querySelectorAll('.key'));\nlet turnon = false;\n\n\n/* RESIZE NANDIBUS */\n\nconst nandibusWitdh = nandibus.clientWidth;\n\nconst resizeNandibus = () => {\n    const basesize = visualViewport.width < 1200 ? visualViewport.width - 100 : 1200;\n    const scale = basesize / nandibusWitdh - 0.001;\n    nandibus.style.transform = `scale(${scale})`;\n}\n\nresizeNandibus();\nwindow.addEventListener('resize', resizeNandibus);\n\n\n/* ADD SOUND TO KEY PRESS */\n\nconst rand = (min, max) => Math.floor(Math.random() * (max-min+1) + min);\n\nconst keyPressSounds = [\n    document.getElementById('key-press-sound-1'),\n    document.getElementById('key-press-sound-2'),\n    document.getElementById('key-press-sound-3'),\n    document.getElementById('key-press-sound-4')\n];\n\n\nkeyPressSounds.forEach(sound => sound.volume = 0.1);\n\nconst playSound = n => keyPressSounds[n].play();\nlet soundOrder = 0;\n\nconst manageKeyPressEvent = () => {\n    if (soundOrder > 3) { soundOrder = 0; }\n    playSound(soundOrder++);\n    lightsAnimation(keyPressedAnimation, 100);\n}\n\nkeys.forEach(key => key.addEventListener('click', manageKeyPressEvent ));\n\n\n/* CLICK NANDIBUS KEY ON KEYPRESS */\n\nwindow.addEventListener('keydown', e => {\n    const key = keys.filter(key => key.dataset.keycode === e.code)[0];\n\n    if (!key) { return; }\n\n    key.classList.add('hover');\n    key.classList.add('active');\n    key.click();\n\n    setTimeout(() => {\n        key.classList.remove('active');\n    }, 100);\n});\n\n/* LIGHT ANIMATION */\n\nconst sleep = ms => {\n    return new Promise(resolve => setTimeout(resolve, ms));\n};\n\nconst lights = {\n    blue: document.querySelector('.nandibus-lights .blue'),\n    red: document.querySelector('.nandibus-lights .red'),\n    yellow: document.querySelector('.nandibus-lights .yellow')\n};\n\nconst turnOffLights = () => {\n    lights.blue.classList.remove('--on');\n    lights.red.classList.remove('--on');\n    lights.yellow.classList.remove('--on');\n};\n\nconst lightsAnimation = (states, defaultDuration) => {\n    if (!turnon) { return; }\n\n\n    const stateTransformed = states.map(state => {\n        return { \n            action: () => {\n                turnOffLights();\n                state.active.forEach(el => el.classList.add('--on'));\n            },\n            delay: state.duration | defaultDuration\n        }\n    });\n\n    const executeStep = (pos, states) => {\n        const state = states[pos];\n        if (!state || !turnon) { return; }\n        state.action();\n        sleep(state.delay).then(() => { executeStep(pos + 1, states); });\n    }\n    \n    executeStep(0, stateTransformed);\n};\n\nconst turnOnAnimation = [\n    { active: [ lights.blue ] },\n    { active: [ lights.red ] },\n    { active: [ lights.yellow ] },\n    { active: [ lights.red ] },\n    { active: [ lights.blue ] },\n    { active: [ ] },\n    { active: [ lights.blue, lights.red, lights.yellow ] },\n    { active: [ ] },\n    { active: [ lights.blue, lights.red, lights.yellow ] },\n];\n\nconst keyPressedAnimation = [\n    { active: [ ] },\n    { active: [ lights.blue,lights.red  ] },\n    { active: [ lights.red ] },\n    { active: [ lights.yellow ] },\n    { active: [ lights.red, lights.blue ] },\n    { active: [ lights.red, lights.blue, lights.yellow ] },\n];\n\n\n/* TURN ON AND OFF */\n\nconst helloNandibusSound = document.getElementById('hello-nandibus-sound');\nhelloNandibusSound.volume = 0.2;\nconst powerButton = document.querySelector('.power');\nconst helloMessage = document.querySelector('.hello-message');\n\npowerButton.addEventListener('click', () => {\n    turnon = !turnon;\n\n    if (turnon) {\n        // helloNandibusSound.currentTime = 0;\n        helloNandibusSound.play();\n        lightsAnimation(turnOnAnimation, 300);\n        nandibus.classList.add('--on');\n        helloMessage.classList.add('--loaded');\n    } else {\n        // helloNandibusSound.pause();\n        turnOffLights();\n    }\n});\n"]}